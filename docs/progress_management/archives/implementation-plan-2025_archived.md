# Sornette対数周期モデル実装計画書
更新日: 2025-08-01

## 1. プロジェクト概要

### 1.1 目的
Didier Sornetteによる対数周期モデル（Log-Periodic Power Law: LPPL）を用いて、金融市場の大規模なクラッシュを予測する実装を行う。

### 1.2 背景
- 「ウォール街の物理学者」で紹介されているSornetteの理論に基づく
- 市場のクラッシュ前に現れる対数周期的な振る舞いを検出
- 過去の市場クラッシュ事例での検証を通じて実装の妥当性を確認

### 1.3 現在の課題
- 論文で報告されているパラメータ（特にβ値）を正確に再現できていない
- β値が期待値0.33に対して0.36程度となっている
- 複数初期値でのフィッティングを試みたが、改善が見られない

## 2. 実装状況の分析

### 2.1 実装済み機能
- **基本的なLPPLフィッティング** (`src/fitting/fitter.py`)
  - べき乗則フィッティング（第1段階）
  - 対数周期フィッティング（第2段階）
  - 複数初期値での最適化機能
  
- **検証フレームワーク** (`src/reproducibility_validation/crash_validator.py`)
  - 過去のクラッシュ事例での再現性検証
  - パラメータの誤差評価
  
- **ユーティリティ関数** (`src/fitting/utils.py`)
  - モデル関数の定義（式54の実装）
  - フィッティング品質の評価指標

### 2.2 現在の問題点
1. **パラメータ再現性の問題**
   - β値の系統的なずれ（0.33 → 0.36）
   - 初期値の選択方法の最適化が不十分
   
2. **データ前処理の課題**
   - 対数変換の適用タイミング
   - データの正規化方法
   
3. **最適化アルゴリズムの限界**
   - 局所最適解への収束
   - パラメータ間の相関による最適化の困難さ

## 3. 改善計画

### 3.1 短期的改善（Phase 1: 1-2週間）

#### 3.1.1 論文の再精査
- [ ] 主要論文の数式実装の再確認
  - Sornette_2004_0301543v1_Critical_Market_Crashes__Anti-Buble.pdf
  - sornette_2001_0106520v1_a_recent-review_and_assessment.pdf
- [ ] パラメータ推定手法の詳細確認
- [ ] データ前処理手順の確認

#### 3.1.2 実装の改善
- [ ] グローバル最適化手法の導入
  - Differential Evolution
  - Basin Hopping
  - Simulated Annealing
- [ ] パラメータ制約の見直し
- [ ] 初期値生成戦略の改善

### 3.2 中期的改善（Phase 2: 3-4週間）

#### 3.2.1 高度な最適化手法
- [ ] ベイズ最適化の導入
- [ ] アンサンブル手法の実装
- [ ] パラメータの不確実性定量化

#### 3.2.2 検証フレームワークの強化
- [ ] 複数のクラッシュ事例での系統的検証
- [ ] クロスバリデーション手法の導入
- [ ] 統計的有意性の詳細な評価

### 3.3 長期的改善（Phase 3: 1-2ヶ月）

#### 3.3.1 予測システムの構築
- [ ] リアルタイム市場データの分析
- [ ] 早期警告システムの実装
- [ ] 予測の信頼区間推定

#### 3.3.2 拡張機能
- [ ] 複数時間スケールでの分析
- [ ] 市場間の相関分析
- [ ] 機械学習との統合

## 4. 技術的詳細

### 4.1 モデル関数（式54）
```
ln(p(t)) = A + B(tc - t)^β + C(tc - t)^β cos(ω ln(tc - t) + φ)
```

### 4.2 パラメータの意味
- `tc`: クリティカル時刻（クラッシュ予想時刻）
- `β`: べき指数（理論値: 0.33）
- `ω`: 対数周期の角振動数
- `φ`: 位相
- `A`, `B`, `C`: スケーリングパラメータ

### 4.3 典型的なパラメータ範囲
- β: 0.2 - 0.8（理論的には0.33付近）
- ω: 4 - 15（典型的には6-8）
- C/B: 0.05 - 0.15（振動の相対的な大きさ）

## 5. 次のステップ

### 5.1 即座に実施すべきアクション
1. グローバル最適化手法の実装テスト
2. 論文の数式実装の詳細な照合
3. 単純なテストケースでの動作確認

### 5.2 進捗管理
- 週次でのパラメータ精度の確認
- 各フェーズの完了基準の設定
- 問題点の早期発見と対策

## 6. 参考資料

### 6.1 主要論文
- docs/thesis/内の各論文ファイル
- 特に実装に直接関わる論文を重点的に参照

### 6.2 実装参考
- 既存のオープンソース実装の調査
- 学術文献での実装事例の収集

## 7. 成功指標

### 7.1 短期目標
- β値の誤差を0.03以内に収める
- 少なくとも3つの過去のクラッシュ事例で検証成功

### 7.2 中期目標
- 全パラメータの誤差を論文報告値の10%以内に
- 予測の統計的有意性の確立

### 7.3 長期目標
- リアルタイム予測システムの稼働
- 新たなクラッシュの早期検出成功

---

本計画は定期的に見直し、進捗状況に応じて更新する。