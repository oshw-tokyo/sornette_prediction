# 現在のIssue管理ファイル

## 【重要】このファイルの編集ルール

### Claude Code による自律的管理のためのガイドライン

1. **編集前の必須確認事項**
   - 必ず編集前にこのファイル全体を Read ツールで読み込むこと
   - 既存のissueの状態を確認すること
   - 重複するissueがないか確認すること

2. **Issue管理のルール**
   - 新規issueは「アクティブなIssue」セクションに追加
   - 解決したissueは「解決済みIssue」に移動（最新10件のみ保持）
   - 古い解決済みissueは archives/ にアーカイブ
   - **Issue IDは永続的な連番管理**（I + 3桁の数字、一度使用された番号は再利用禁止）
   - **次回使用ID**: I052（2025-08-10時点）

3. **優先度の定義**
   - 🔴 Critical: システムが動作しない、予測が全く機能しない
   - 🟠 High: 精度に大きく影響、実用性を阻害
   - 🟡 Medium: 改善が望ましい、将来的な問題
   - 🟢 Low: 細かい改善点、nice to have

4. **科学的根拠の管理**
   - 論文との乖離は必ず Issue として記録
   - 関連論文とその箇所を明記
   - 定量的な乖離を数値で記録
   - 解決時は論文との一致を必ず検証

---

## Issue統計サマリー

- **総アクティブIssue数**: 5 （安定版v1.0実装フェーズ）
- **Critical**: 0
- **High**: 2  
- **Medium**: 3
- **Low**: 0
- **今週新規**: 5 (安定版v1.0関連)
- **平均解決時間**: 0.5日 (予定)

---

## アクティブなIssue

### 🔴 Critical Issues

**現在はCritical Issueはありません。安定版v1.0実装が最優先です。**
| I017 | プロジェクト構造破綻問題 | ルート直下に多数のPythonファイル散在・src/以下の定義構造から逸脱・バックエンド/フロントエンド分離未実装・保守性著しく低下 | 2025-08-04 | プロジェクト全体の保守性 | 緊急対応必要 |

---

### 🟠 High Priority Issues

| Issue ID | タイトル | 詳細 | 発生日 | 影響範囲 | ステータス |
|----------|---------|------|--------|----------|-----------|
| I002 | ローカルミニマム問題 | 最適化が局所最適解に陥りやすい | 2025-01-22 | パラメータ推定の信頼性 | 調査中 |
| I003 | パラメータ不安定性 | 時間窓の変更でパラメータが大きく変動 | 2025-01-22 | 予測の一貫性 | 未着手 |
| I018 | データフロー・形式標準化未実装 | データ形式・フロー定義が分散・変更リスク・トラブル原因 | 2025-08-04 | システム安定性 | 設計段階 |
| I025 | 新マーケットデータカタログシステムのダッシュボード統合未実装 | v2.0カタログ・レート制限・クラッシュ警告システムがダッシュボードに未反映・過去データ形式変更でエラー多発リスク | 2025-08-04 | ダッシュボード機能・UX | 慎重対応必要 |
| I032 | カタログベース分析時のPNGファイル自動保存機能の排除必要 | カタログに沿ったフィッティング実行時に大量のPNGファイルが自動保存される問題・プロット内容が不正確・データ容量の無駄な増大を招く | 2025-08-08 | ストレージ効率・システム品質 | 対応必要 |
| I033 | ダッシュボード Price&Prediction タブの包括的UI改善必要 | Individual Fitting ResultsのFuture Period未表示・縦線ホバー機能不具合・Number of Results仕様誤解・期間選択機能不備・プロット数制限未実装 | 2025-08-08 | ダッシュボードUX・機能性 | ✅ 解決済 |
| I034 | ダッシュボード Display Settings datetime.date エラー | Display Settings で期間データ処理時に 'datetime.date' object has no attribute 'date' エラーが発生・日時型変換処理の不具合 | 2025-08-08 | ダッシュボード機能性 | ✅ 解決済 |
| I035 | 統合プロット Future Period 表示不完全・Individual Results Future Period未実装 | Market Data統合プロットでLPPL Fit(Future Period)が右端まで表示されない・フィッティングと生データの日付ずれ・Individual Fitting ResultsでのFuture Period未実装 | 2025-08-08 | ダッシュボードUX・予測表示機能 | ✅ 解決済 |
| I036 | ダッシュボード表示数不一致・プロット配置改善必要 | Individual Fitting Results表示数がAnalysis Period Selection数と不一致・統合プロットでLPPL Future Periodとtc縦線位置ずれ・通常プロット配置改善要求 | 2025-08-08 | ダッシュボードUX・表示整合性 | ✅ 解決済 |
| I037 | ダッシュボードUI/UX包括改善要求 | Future Period位置ずれ・プロット縦配置・Individual Results表示数明示・Prediction Summary表形式化・タブ名称適正化 | 2025-08-08 | ダッシュボードUX・可読性 | ✅ 解決済 |

---

### 🟡 Medium Priority Issues

| Issue ID | タイトル | 詳細 | 発生日 | 影響範囲 | ステータス |
|----------|---------|------|--------|----------|-----------|
| I004 | データ前処理の不統一 | 対数変換やスケーリングの方法が統一されていない | 2025-01-22 | 再現性 | 未着手 |
| I005 | リアルタイム処理未実装 | 自動監視システムが完成していない | 2025-01-22 | 実運用 | 設計段階 |
| I011 | 可視化表示制御のロバスト性 | データ欠損時の表示エラー対策・フィルタリング異常時の対処が必要 | 2025-08-03 | 可視化品質 | 未着手 |
| I012 | scheduled_nasdaq_analysis.py実装バグ | save_analysis_resultメソッドが存在せず、save_lppl_analysisが正しい | 2025-08-03 | スケジュール実行 | ✅ 解決済 |
| I013 | データベース重複防止機能未実装 | 同一条件での解析重複実行時に同じデータが複数保存される | 2025-08-03 | データ整合性 | 設計必要 |
| I014 | プロジェクト内不要ファイル蓄積 | debug/demo/test用の一時ファイルが多数蓄積しプロジェクト把握を困難化 | 2025-08-03 | 保守性・可読性 | ✅ 解決済 |
| I015 | scheduled_nasdaq_analysis.py環境変数未読み込み | dotenvによる.env読み込み処理が欠如でAPI認証失敗 | 2025-08-03 | 実行失敗 | ✅ 解決済 |
| I016 | データソース管理の体系化未実装 | 銘柄・API対応が分散管理で重複取得リスク・メタ情報不透明 | 2025-08-03 | データ効率性・UX | 要件定義完了 |
| I019 | ParametersタブData Period表示問題 | data_start・data_end・period_daysが全てN/A表示・データ存在するが表示されない | 2025-08-04 | ダッシュボード機能性 | 調査中 |
| I022 | NASDAQ高リスク分析結果の科学的検証必要 | tc=1.0057・R²=0.9163で🔴高リスク判定されたが、にわかには信じがたい結果のため詳細検証が必要 | 2025-08-04 | 予測結果の信頼性 | 検証計画策定 |
| I023 | FREDで入手不可能な重要データソースの代替確保 | 国際指数(日経225・DAX等)・REIT価格指数・仮想通貨ETF等の重要データがFREDで取得不可 | 2025-08-04 | データカバレッジ | 対応検討中 |
| I028 | 通知システム未実装 | 定期分析やクラッシュ警告の通知機能が未実装・リアルタイム監視に必要・メール/Slack/Discord等の通知手段検討必要 | 2025-08-05 | 実運用・監視 | 要件定義必要 |
| I041 | 高確度クラッシュ予測銘柄の効率的選択機能未実装 | データ増加に伴い現在の銘柄選択方法では対処困難・高確度予測や近日予測銘柄のサイドパネル優先表示機能が必要・現在の選択方法とのスイッチ機能実装が必要 | 2025-08-08 | ダッシュボードUX・実用性 | 将来実装計画 |
| I042 | Priority Filter実装の科学的妥当性に問題・予測精度劣化リスク | 現在のPriority Filterが本日基準で過去の古いフィッティング結果も含む設計・フィッティング基準日からの時間経過による精度劣化を考慮せず・信頼性の低い予測データ混入のリスク・科学的予測評価として不適切 | 2025-08-08 | 科学的正確性・予測品質 | 緊急対応必要 |
| I043 | LPPL分析失敗データの記録・管理システム未実装 | LPPLフィッティング失敗時のデータが完全に記録されず・バックフィル/定期実行での重複試行リスク・ダッシュボード表示への潜在的影響・分析失敗パターンの分析機会喪失・システム完全性の欠如 | 2025-08-09 | データ完全性・システム設計・分析品質 | 🔄 実装中 |
| I044 | ドキュメント重複・矛盾・実装乖離の包括的問題 | プロジェクト構造表記の重大な矛盾・実装とドキュメントの乖離・陳腐化した情報の蔓延・メタデータ誤差・統一性欠如 | 2025-08-09 | ドキュメント品質・開発効率 | 緊急対応必要 |
| I045 | フィッティング失敗データの完全再処理オプション未実装 | マーケットデータ取得失敗による分析失敗に対して、フル再解析（データ取得〜フィッティング）オプションが未実装・現在の失敗追跡システムはフィッティング段階での失敗のみ対応・データ取得段階での失敗は適切に追跡・再処理されない・CoinGecko APIキー設定後の再処理需要 | 2025-08-10 | データ取得・分析完全性・システム設計 | 対応必要 |
| I046 | 現行API制限による銘柄取得率低下・代替API戦略未実装 | Alpha Vantage: 25-500req/日制限・CoinGecko: 10req/分制限・FRED: 問題なし・改善候補：Twelve Data(800req/日)・BlockMarkets(無制限)・Binance API(1200req/分)・Coinbase API(10000req/時)・Finnhub API(60req/分)・FMP(250req/日)・優先順位戦略未実装・データソース自動切替未実装 | 2025-08-10 | データ取得効率・システム拡張性・市場カバレッジ | 将来実装計画 |
| I047 | ダッシュボードLPPL分析での生データ重複取得問題 | LPPL Fitting Analysis各プロットで生データ期間が重複しているにも関わらず、繰返し生データ取得を実行・本来は最低限回数での生データ取得後、各グラフ毎にフィッティング期間相当データを選定してプロット実行する設計・デバッグ作業中に元実装が消失した可能性・API制限への影響・パフォーマンス低下・不要なデータソース負荷 | 2025-08-10 | ダッシュボードパフォーマンス・API効率・システム設計 | 修正必要 |
| I048 | analysis_basis_date NULL値問題による重複データ生成 | データベース内4,018件中3,848件(95.8%)でanalysis_basis_date がNULL・分析基準日概念の実装不備・UNIQUE制約が機能せず大量重複データ発生(NASDAQ100: 201重複等)・ダッシュボード表示ソート不能・時系列分析精度低下・科学的解釈への深刻な影響・論文再現システムの根幹概念実装欠落 | 2025-08-10 | データ完全性・科学的正確性・システム設計 | 🔴 Critical |
| I049 | CoinGecko API統合不完全によるデータ取得率低下 | backfillbatch実行結果：CoinGecko銘柄37中15銘柄のみ取得(40.5%カバレッジ)・BTC/ETH/USDT/USDC等主要仮想通貨未取得・APIキー未設定またはレート制限問題・22銘柄の継続的データ欠損・市場分析の包括性に重大な影響・API制限管理の不備 | 2025-08-10 | データ取得完全性・市場カバレッジ・API統合 | 🟠 High |
| I050 | Binance API統合待ち（アカウント認証中・2025-08-12完了予定） | Binance APIアカウント作成済み・現在認証審査中・2025-08-12頃完了予定・認証完了後にAPIキー取得可能・仮想通貨データ取得の最優先候補（1200req/分・最高品質）・BTC/ETH等主要仮想通貨の確実な取得のため重要・実装準備完了後は即座に統合実施 | 2025-08-10 | 仮想通貨データ取得・API統合・システム拡張 | 🔄 承認待ち |
| I051 | Finnhub API時系列データ取得制限・無料プラン機能不足 | Finnhub API実装・接続テスト成功（AAPL価格取得・シンボル検索確認済み）・しかし時系列データ（stock/candle, crypto/candle）は403エラーで無料プラン制限・LPPL分析には過去365日の時系列データが必須のため利用不可・リアルタイム価格取得のみ可能だが分析価値限定的・有料プラン検討も費用対効果低い | 2025-08-10 | API統合・データ取得・コスト効率 | 🚫 利用不可 |

---

## 🚨 重要な修正作業時の注意事項

### Critical Issues (I048, I049) の修正実装について

**最重要原則**: 既存の動作している論文再現システム（特に1987年ブラックマンデー検証: 100/100スコア）を**絶対に破損させない**

#### 修正アプローチ方針
1. **段階的実装**: 一度に大きな変更を行わず、小さな修正を積み重ね
2. **バックアップ必須**: 修正前に必ずデータベースとコードのバックアップ実行
3. **テスト実行**: 各変更後に `python entry_points/main.py validate --crash 1987` で論文再現確認
4. **影響範囲限定**: データベース操作は最小限に留め、コア機能に影響しない範囲で実施

#### 具体的作業ガイドライン
- **I048 (analysis_basis_date NULL問題)**:
  - 既存データの一括更新は**禁止**（データ破損リスク）
  - 新規データのみ適切な基準日設定から開始
  - 段階的な重複除去（最新データ優先保持）
  - 保存ロジック修正は慎重にテスト実行

- **I049 (CoinGecko API統合)**:
  - APIキー設定変更のみから開始
  - レート制限パラメータ調整
  - 既存データベース構造への影響を最小化
  - エラーハンドリング強化を優先

#### 作業順序の推奨
1. 論文再現テスト実行（現状確認）
2. データベースバックアップ作成
3. 小規模な修正実装
4. 論文再現テスト再実行（破損確認）
5. 問題なければ次の修正へ継続

**参考文書**: `/workspace_for_claude/backfillbatch_execution_report.md` - 包括的な分析レポート

---

### 🟢 Low Priority Issues

| Issue ID | タイトル | 詳細 | 発生日 | 影響範囲 | ステータス |
|----------|---------|------|--------|----------|-----------|
| I024 | ローカルデータ保存による古いデータ参照時の潜在的問題 | 解析済みデータのみ保存するため過去データ再取得時に不整合の可能性・ダッシュボード表示に影響する可能性あり | 2025-08-04 | データ整合性 | リスク認識済 |
| I027 | スケジュール管理設計の改善必要 | 現在のfred_weeklyやstock_weekly命名がデータソース性質と実行頻度を混在させており設計不適切・より体系的なスケジュール管理が必要 | 2025-08-05 | スケジュールシステム設計 | ✅ 解決済 |
| I029 | 頻度混在データの曜日バイアス問題 | 週次・日次データが混在時に土曜日（週次基準日）に偏ったデータ表示となる可能性・ユーザーが最新性を誤解するリスク | 2025-08-05 | ダッシュボード表示・UX | 軽微リスク |
| I030 | バックフィル曜日整合性未実装 | 週次解析のバックフィルで任意の日付を指定した場合、スケジュール設定の曜日と異なる基準日で分析実行される重大な問題 | 2025-08-05 | 科学的整合性・データ品質 | ✅ 解決済 |
| I031 | ダッシュボードのスケジュール別データ表示機能未実装 | 現在のダッシュボードは頻度情報（weekly/daily）やスケジュール情報を表示・フィルタリングできない・混在データの適切な表示・選択機能が未実装・ユーザビリティに影響 | 2025-08-05 | ダッシュボード機能・UX | 設計段階 |

---

## 解決済みIssue（最新10件）

| 解決日 | Issue ID | タイトル | 解決方法 | 解決時間 | 学習事項 |
|--------|----------|---------|----------|----------|----------|
| 2025-08-08 | I040 | Multi-Period Convergence Analysis機能問題・New Integrated Predictions期間対応不完全 | New Integrated Predictions全期間対応実装・Multi-Period Analysis固定期間化・Custom Periodタブ削除・filtered_dataエラー解決・期間説明明確化・データ不足時詳細案内追加 | 1.0日 | 固定期間とサイドバー期間の明確区別がユーザー理解に重要。データ不足時の具体的アドバイス提供により実用性向上。10色拡張により大量予測表示対応 |
| 2025-08-08 | I039 | ダッシュボードfitting_basis_date KeyError・Integrated Predictions表示問題 | fitting_basis_date列生成ロジック統一・valid_dataにも同様処理適用・New Integrated Predictions実装（Latest Analysis基準）・データスコープ問題完全解決 | 0.8日 | データ処理ロジックの一貫性が重要。異なるデータフレーム間で同一列が必要な場合は統一処理関数化が効果的。Latest Analysis基準統合表示で科学的独立性確保 |
| 2025-08-08 | I038 | Prediction Convergence多期間分析・絶対最新データ表示未実装 | Latest Analysis Details絶対最新データ表示実装・Prediction Convergence 6期間タブ実装・複数収束判定手法実装（標準偏差・重み付け・トレンド解析・コンセンサス予測）・英語統一表示 | 1.5日 | 多期間収束分析は予測精度評価の核心機能。重み付け収束判定により最新データの重要性を適切評価。絶対最新データ表示により期間フィルタに依存しない科学的分析実現 |
| 2025-08-08 | I037 | ダッシュボードUI/UX包括改善要求 | Individual Analysis実装を参照したFuture Period位置修正・プロット縦配置実装・Individual Results表示数明示・Prediction Summary表形式化・LPPL Fitting Analysisタブ名称変更 | 1.2日 | Individual Analysis正実装の参照が効果的。表形式によりパラメータ可読性大幅向上。適切なタブ名称は機能理解に重要 |
| 2025-08-08 | I036 | ダッシュボード表示数不一致・プロット配置改善必要 | Individual Results表示数を期間選択と連動・統合プロットFuture Period-tc縦線位置整合・通常プロット分割表示実装・デバッグモード調整 | 0.6日 | 表示数連動と位置整合性は科学的正確性に直結。分割プロット表示により最新分析と統合分析の区別が明確 |
| 2025-08-08 | I035 | 統合プロット Future Period 表示不完全・Individual Results Future Period未実装 | 拡張LPPL計算関数実装・Future Period予測日+60日まで表示・Individual Results拡張・デバッグ分割プロット機能追加・X軸範囲適切化 | 0.8日 | Future Period表示は予測精度向上に重要。データの時系列整合性確認のための分割プロット機能が有効 |
| 2025-08-08 | I034 | ダッシュボード Display Settings datetime.date エラー | datetime.dateオブジェクトに対する重複.date()呼び出しを削除・期間計算ロジックの修正により正常動作回復 | 0.2日 | pandas.Timestampから変換後のdate型の扱いは慎重に。型チェックと適切な変換処理が重要 |
| 2025-08-08 | I033 | ダッシュボード Price&Prediction タブの包括的UI改善必要 | 日付範囲選択機能実装・Individual Fitting Results Future Period表示済み・プロット数制限実装(5件)・縦線ホバー技術的制約を文書化・フィッティング基準日ベースソート実装 | 1日 | UI/UX改善は段階的実装が効果的。技術的制約は代替解決策の検討と適切な文書化が重要 |
| 2025-08-07 | I008 | 可視化要件不明確問題 | ダッシュボード完全実装完了・3タブ構成で全機能稼働・Price&Predictions/Parameters/Convergence画面実装・エラーハンドリング強化 | 3日 | 要件不明確問題は段階的実装と継続的改善により解決。実装状況ベースでの仕様書作成が有効 |
| 2025-08-07 | I009 | 定期フィッティングシステム未設計 | スケジュール分析システム完全実装・週次/日次実行対応・自動バックフィル機能・Source×Frequency分離設計・エラーハンドリング完備 | 4日 | スケジュール機能は設計段階での十分な検討と段階的実装により、実用的で拡張可能なシステム構築が可能 |
| 2025-08-07 | I010 | 現在の可視化ツールの動作検証未完了 | Streamlitダッシュボード正常稼働確認済み・全タブ機能検証完了・データフロー診断機能実装・本番稼働中 | 2日 | 動作検証は実装と並行して行うことで効率的。診断機能の追加により将来の問題予防も実現 |
| 2025-08-05 | I030 | バックフィル曜日整合性未実装 | 週次バックフィルで曜日整合性を確保するロジック実装・開始日を指定曜日に自動調整・科学的整合性を完全回復 | 0.5日 | 週次分析における曜日整合性は科学的正確性の根幹であり、バックフィル機能でも厳密に遵守が必要 |
| 2025-08-05 | I027 | スケジュール管理設計の改善必要 | Source×Frequency分離設計の実装・configure/run/backfillコマンド体系整備・データベース構造改善 | 1日 | スケジュール管理はデータソースと実行頻度を明確分離し、拡張性を確保することが重要 |
| 2025-08-05 | I015 | scheduled_nasdaq_analysis.py環境変数未読み込み | entry_points/main.pyに自動.env読み込み機能実装・python-dotenvによる自動環境変数設定 | 0.3日 | 環境変数の自動読み込みはユーザビリティ向上の重要な要素、特にAPI認証で必須 |
| 2025-08-04 | I026 | basic_analysis.pyインポートエラー | infrastructure.database.integration_helpers.pyとinfrastructure.visualization.lppl_visualizer.pyのインポートパスを修正 (../fitting → core.fitting) | 0.2日 | 4層アーキテクチャ移行後のインポートパス更新が必要。相対インポートから絶対インポートへの変更が重要 |
| 2025-08-04 | I020 | ダッシュボードパフォーマンス問題 | pandas apply()をベクトル化処理・リスト内包表記に変更、重い処理を最優化 | 0.5日 | apply()は行ごと処理で重い。ベクトル化・並列処理で大幅高速化可能 |
| 2025-08-04 | I021 | Timestamp型エラー問題 | pandas.Timestamp→python datetime変換を統一・plotly互換性対応完了 | 0.5日 | 異なるライブラリ間での日時型変換は統一処理が必須 |
| 2025-08-02 | I011 | matplotlib GUIスタック問題 | matplotlib.use('Agg')でGUI無しのヘッドレスモードで実装 | 1日 | 自動化環境でのGUIライブラリ使用時はヘッドレスモードが必須 |
| 2025-08-02 | I012 | 結果データの永続化未実装 | SQLiteデータベースとStreamlitダッシュボードで解決 | 1日 | リアルタイム結果参照にはデータベース永続化が不可欠 |
| 2025-08-02 | I013 | 論文再現保護体制不完全 | CLAUDE.md・README.md・実装戦略文書に保護方針を明記 | 0.5日 | 科学的根幹の明確な保護方針と検証プロトコルが開発の最優先事項 |

---

## 🔥 重要Issue詳細解説

### Issue I017: プロジェクト構造破綻問題 【Critical】

**現状の問題**:
- ルートディレクトリに散在するファイル群:
  - `scheduled_*.py` (解析スケジュール)
  - `demo_*.py` (デモ・テスト)
  - `debug_*.py` (デバッグ)
  - `test_*.py` (テスト)
  - `run_*.py` (実行)
  - `create_*.py` (作成)
- 想定されていた `src/` 構造からの逸脱
- バックエンド・フロントエンド混在

**対応方針**:
1. **フォルダ構造再設計**: バックエンド/フロントエンド分離
2. **段階的移行**: 既存動作を保証しながら整理
3. **コード解析**: Agent toolを活用した現状把握
4. **データフロー文書化**: 変更リスク回避

### Issue I018: データフロー・形式標準化未実装 【High】

**現状の問題**:
- データ形式定義が分散
- フローが暗黙知化
- 変更時のトラブルリスク高

**対応方針**:
1. **現状データフロー解析**: Agent toolによる自動解析
2. **標準化仕様策定**: 形式・インターフェース定義
3. **変更管理プロセス**: 安全な変更手順確立

### Issue I019: ParametersタブData Period表示問題 【Medium】

**現状の問題**:
- データベースには `data_period_start`, `data_period_end` 存在
- 表示処理で `N/A` となる
- 日付フォーマット処理の問題

**対応方針**:
1. **データ変換処理デバッグ**: 型変換・エラーハンドリング確認
2. **表示ロジック修正**: 安全な日付処理実装

### Issue I022: NASDAQ高リスク分析結果の科学的検証必要 【Medium】

**現状の問題**:
- 2025年8月4日のNASDAQCOM分析結果 (2023-08-07 〜 2025-08-01, 499日分):
  - tc (臨界時間): 1.0057 ← 極めて近い将来のクラッシュを示唆
  - β (臨界指数): 0.4021 ← 理論値0.33に近い値
  - ω (角周波数): 2.7057 ← 予想より低い振動数
  - R² (決定係数): 0.9163 ← 高い予測精度
  - **🔴 バブル危険度: 高** と判定

**疑問点**:
1. **tc値の妥当性**: 1.0057という値は数日以内のクラッシュを示唆するが現実的か？
2. **データ期間**: 2年間のデータで本当にバブル判定が適切か？
3. **市場状況との整合性**: 現在の市場環境と予測結果が整合するか？
4. **アルゴリズムの妥当性**: フィッティング手法に問題がないか？

**検証計画**:
1. **異なる期間での分析**: 1年、3年、5年データで結果比較
2. **他指標との比較**: S&P500、ダウ・ジョーンズでの同期間分析
3. **パラメータ感度分析**: 初期値依存性の検証
4. **歴史的比較**: 過去の類似パターンとの比較検証
5. **論文基準との照合**: Sornette論文の判定基準との整合性確認

**検証期限**: 2025-08-11 (1週間以内)

### Issue I023: FREDで入手不可能な重要データソースの代替確保 【Medium】

**現状の問題**:
FREDは米国中心のデータに限定されており、以下の重要データが取得不可：

**1. 国際指数**:
- 日経225（NIKKEI225）
- ドイツDAX（DAX）
- 英国FTSE100（FTSE100）
- フランスCAC40（CAC40）
- 上海総合指数（SHANGHAI）

**2. REIT価格指数**:
- XLRE（不動産セレクトセクターSPDR ETF）
- VNQ（バンガード不動産ETF）
- RWR（SPDR ダウジョーンズREIT ETF）

**3. 仮想通貨ETF**:
- BITO（ProShares Bitcoin Strategy ETF）
- ETHE（Grayscale Ethereum Trust）
- GBTC（Grayscale Bitcoin Trust）

**対応方針**:
1. **優先度評価**: ユーザーニーズに基づく優先順位付け
2. **代替API調査**: Yahoo Finance、IEX Cloud、Polygon.io等の評価
3. **段階的実装**: 優先度の高いものから順次対応
4. **コスト評価**: 無料枠内での実現可能性検討

### Issue I024: ローカルデータ保存による古いデータ参照時の潜在的問題 【Low】

**現状の問題**:
- 解析済みデータのみ保存する方針のため、生データが保存されない
- 過去の分析結果を参照する際、元データの再取得が必要
- APIの仕様変更や過去データ修正時に不整合が発生する可能性

**影響範囲**:
- ダッシュボードでの過去データ表示
- 長期トレンド分析の再現性
- バックテストの一貫性

**リスク軽減策**:
1. **メタデータ保存**: データ取得日時・バージョン情報の記録
2. **チェックサム**: データ整合性確認の仕組み
3. **定期スナップショット**: 重要な時点でのデータバックアップ
4. **データ変更通知**: APIデータ変更時のアラート機能

**現時点の判断**: 
当面はこのリスクを受け入れ、将来的な改善として検討継続

### Issue I025: 新マーケットデータカタログシステムのダッシュボード統合未実装 【High】

**現状の問題**:
2025-08-04に実装された新システムがダッシュボードに統合されていない：

**1. 実装済み新機能（未統合）**:
- マーケットデータカタログv2.0（16銘柄、7カテゴリ）
- APIレート制限管理システム
- 投資級クラッシュ警告システム（4段階リスク・緊急度評価）
- 構造化メタデータ（asset_class, instrument_type等）

**2. ダッシュボードへの影響範囲**:
- 新銘柄（Bitcoin、Ethereum、NASDAQ100、半導体指数等）の表示
- 分野別・種類別のフィルタリング機能
- クラッシュ警告の優先度表示
- レート制限状況の可視化

**3. 過去の問題事例**:
- データ形式変更時に多数のエラーが発生
- 解決に長時間を要した経験あり
- UI/UXへの影響が大きい

**対応方針**:
1. **段階的統合**: 既存機能を壊さない慎重なアプローチ
2. **事前テスト**: ローカル環境での徹底的な動作確認
3. **フォールバック準備**: 問題発生時の迅速な切り戻し手順
4. **データ形式検証**: 既存データベースとの互換性確認
5. **UI要素追加**: 新メタデータに対応した表示項目追加

**技術的課題**:
- Streamlitダッシュボードのコンポーネント更新
- データベーススキーマの拡張
- 既存の表示ロジックとの整合性
- パフォーマンスへの影響評価

**優先度**: 高（ユーザー体験に直結、投資判断機能の中核）

### Issue I027: スケジュール管理設計の改善必要 【Low】

**現状の問題**:
現在のスケジュール命名規則に設計上の問題がある：

**1. 不適切な命名例**:
- `fred_weekly` ← データソース + 頻度の混在
- `stock_weekly` ← 対象種別 + 頻度の混在  
- どちらも「何を週次にするのか」の性質が異なる

**2. 概念的混乱**:
- データソース (FRED vs Alpha Vantage) と実行頻度 (daily vs weekly) の混在
- 拡張性の欠如（新しいソースや頻度追加時の一貫性不備）
- ユーザー理解しにくいコマンド体系

**改善提案**:
**データソース別 × 頻度別の分離設計:**

```bash
# 設定コマンド（改善案）
python entry_points/main.py scheduled-analysis configure --source fred --frequency weekly --symbols NASDAQ,SP500
python entry_points/main.py scheduled-analysis configure --source alpha_vantage --frequency daily --symbols AAPL,MSFT

# 実行コマンド（改善案）  
python entry_points/main.py scheduled-analysis run --source fred --frequency weekly
python entry_points/main.py scheduled-analysis run --source all --frequency daily
```

**データベース設計の改善:**
```sql
schedule_config (
    id, source_type, frequency, day_of_week, hour,
    enabled, symbols_list, last_run, created_at
)
```

**命名規則の統一:**
- `fred_market_weekly` (FRED経済指標、週次)
- `av_stocks_daily` (Alpha Vantage株式、日次)  
- `av_etf_weekly` (Alpha Vantage ETF、週次)

**対応優先度**: Low（機能的には問題ないが、将来の拡張性・保守性向上のため）

### Issue I028: 通知システム未実装 【Medium】

**現状の問題**:
定期分析システムに通知機能が未実装：

**1. 必要な通知シナリオ**:
- **定期分析完了通知**: スケジュール実行結果のサマリー
- **クラッシュ警告通知**: 高リスク分析結果の即座通知
- **エラー発生通知**: システムエラー・API制限等の障害通知
- **システム状況通知**: 週次/月次の稼働状況レポート

**2. 対象通知手段**:
- **メール**: 基本的な通知手段
- **Slack**: チーム/組織向けの即座通知
- **Discord**: 個人/小規模チーム向け
- **Webhook**: 外部システム連携

**3. 通知レベル設計案**:
- **Info**: 定期実行完了、正常なシステム稼働
- **Warning**: API制限接近、データ取得遅延
- **Critical**: 高リスククラッシュ警告、システムエラー
- **Emergency**: システム停止、重大な障害

**実装要件**:
1. **設定ファイル管理**: `.env` での通知設定
2. **テンプレート系統**: メッセージ形式の統一
3. **配信制御**: 通知頻度制限、重複回避
4. **認証管理**: APIキー・トークンの安全な管理
5. **失敗時処理**: 通知失敗時のフォールバック処理

**実装例**:
```python
# .env 設定例
NOTIFICATION_EMAIL_ENABLED=true
NOTIFICATION_SLACK_WEBHOOK=https://hooks.slack.com/...
NOTIFICATION_DISCORD_WEBHOOK=https://discord.com/api/webhooks/...

# 使用例
notifier.send_analysis_complete(schedule_name, results)
notifier.send_crash_alert(symbol, risk_level, parameters)
notifier.send_error_alert(error_category, error_details)
```

**対応方針**:
1. **要件定義**: 通知シナリオ・手段の詳細設計
2. **段階的実装**: メール → Slack → Discord の順で実装
3. **設定管理**: 環境変数での柔軟な設定管理
4. **テスト環境**: 開発時の通知テスト仕組み

**対応優先度**: Medium（実運用に重要だが、現時点では手動監視で代替可能）

### Issue I029: 頻度混在データの曜日バイアス問題 【Low】

**現状の問題**:
週次・日次分析データが混在する運用において、潜在的な表示バイアスが発生する可能性：

**1. 曜日バイアスの発生パターン**:
- **週次データ**: 土曜日を基準日とする（スケジュール設定）
- **日次データ**: 毎日異なる曜日を基準日とする
- **表示時の影響**: 土曜日のデータが他の曜日より多く表示される可能性

**2. ユーザー理解への影響**:
- **最新性の誤解**: 土曜日データが最新に見えてしまう
- **頻度の混乱**: 週次・日次の区別が不明確
- **データ量の偏り**: 特定曜日のデータが過多表示

**3. 想定される問題シナリオ**:
```
例: NASDAQCOM銘柄の表示
- 2025-08-02 (土): fred_weekly
- 2025-08-01 (金): fred_daily  
- 2025-07-31 (木): fred_daily
- 2025-07-26 (土): fred_weekly ← 週次データが目立つ
```

**対策実装済み**:
1. **曜日メタデータ**: `basis_day_of_week` カラムで曜日情報管理
2. **頻度別表示**: `analysis_frequency` でデータ分類
3. **専用クエリ**: `get_recent_analyses_by_frequency()` で頻度別取得
4. **最新分析抽出**: `get_latest_analysis_per_frequency()` で重複解消

**軽微リスクと判断する理由**:
- **影響は限定的**: 表示順序の問題であり、データ品質に影響なし
- **対策実装済み**: 曜日メタデータにより識別・分離可能
- **ユーザー対応可能**: ダッシュボードでの表示改善により解決可能

**将来の改善案**:
1. **頻度別タブ表示**: 週次・日次を明確に分離
2. **最新データ優先**: 各頻度の最新分析を優先表示
3. **曜日表示**: 基準日の曜日を明示的に表示

**対応優先度**: Low（運用上は問題なし、UI改善により解決可能）

### Issue I030: バックフィル曜日整合性未実装 【Critical → Resolved】

**問題の詳細**:
週次解析のバックフィル機能において、重大な科学的整合性の問題が発見されました：

**1. 問題の発生パターン**:
```bash
# 例: fred_weeklyは土曜日基準（day_of_week=5）
# ユーザーが火曜日を指定してバックフィル実行
python entry_points/main.py scheduled-analysis backfill --start 2025-01-07 --schedule fred_weekly

# 修正前の問題のある動作
2025-01-07 (火)  ← ❌ 曜日が不整合
2025-01-14 (火)  ← ❌ 曜日が不整合  
2025-01-21 (火)  ← ❌ 曜日が不整合

# 修正後の正しい動作
2025-01-11 (土)  ← ✅ スケジュール設定と整合
2025-01-18 (土)  ← ✅ スケジュール設定と整合
2025-01-25 (土)  ← ✅ スケジュール設定と整合
```

**2. 科学的影響**:
- **データ整合性の破綻**: 同一スケジュールで異なる曜日の基準日が混在
- **時系列分析の歪み**: 曜日効果による予測精度の低下
- **論文再現性の損失**: 週次分析の定義違反

**3. 根本原因**:
```python
# 修正前の問題コード
def _generate_backfill_periods(self, start: datetime, end: datetime, frequency: str):
    if frequency == 'weekly':
        current = start  # ❌ 開始日をそのまま使用
        while current <= end:
            periods.append(current.strftime('%Y-%m-%d'))
            current += timedelta(days=7)  # ❌ 7日間隔だが曜日無視
```

**4. 解決策の実装**:
```python
# 修正後の正しいコード
def _generate_backfill_periods(self, start: datetime, end: datetime, frequency: str, 
                              schedule_config: Optional[ScheduleConfig] = None):
    if frequency == 'weekly':
        target_weekday = schedule_config.day_of_week if schedule_config else 5
        # 開始日を指定曜日に調整
        days_until_target = (target_weekday - start.weekday()) % 7
        current = start + timedelta(days=days_until_target)
        # 範囲内の前の対象曜日も含める
        if days_until_target > 0:
            prev_target = current - timedelta(days=7)
            if prev_target >= start:
                current = prev_target
```

**5. 検証結果**:
```
🧪 テスト結果（2025-01-07 火曜日開始）:
開始日: 2025-01-07 (Tue)
対象曜日: 土曜日 (day_of_week=5)

生成された期間:
  1. 2025-01-11 (Sat)  ✅ 正しい曜日
  2. 2025-01-18 (Sat)  ✅ 正しい曜日
  3. 2025-01-25 (Sat)  ✅ 正しい曜日
  4. 2025-02-01 (Sat)  ✅ 正しい曜日
```

**6. 影響範囲**:
- **既存データへの影響**: なし（新しいバックフィル実行時のみ適用）
- **科学的整合性**: 完全回復
- **ユーザー体験**: 透明性向上（どの曜日で分析されるかが明確）

**解決確認**: ✅ 完了
- 曜日整合性を確保するロジック実装
- テストでの動作確認完了
- 科学的整合性の回復

**学習事項**: 
週次分析における曜日の整合性は科学的正確性の根幹であり、バックフィル機能でも厳密に遵守する必要がある。

### Issue I031: ダッシュボードのスケジュール別データ表示機能未実装 【Medium】

**現状の問題**:
スケジュール分析システム実装により、データベースに新しいメタデータが追加されましたが、ダッシュボードでの表示・選択機能が未対応：

**1. 未対応のメタデータ**:
- `analysis_frequency` (weekly/daily) - 解析頻度情報
- `schedule_name` (fred_weekly/alpha_vantage_daily) - スケジュール識別子
- `basis_day_of_week` (0-6: 月-日) - 曜日メタデータ
- `is_scheduled` (Boolean) - スケジュール実行フラグ

**2. 必要な機能拡張**:
```
ダッシュボード機能要件:
- 頻度別フィルタリング（週次・日次データの分離表示）
- スケジュール別グルーピング（fred_weekly, alpha_vantage_daily）
- 曜日情報の表示（土曜日ベース、月曜日ベース等）
- 最新データ優先表示（各頻度の最新分析を明確に表示）
```

**3. ユーザビリティへの影響**:
- **データ混在の困惑**: 週次・日次データが時系列で混在表示
- **最新性の誤解**: どれが最新の分析結果かが不明確
- **選択効率の低下**: 特定頻度のデータのみ表示できない
- **メタデータ不可視**: スケジュール情報がユーザーに見えない

**4. 技術的課題**:
- **Streamlitコンポーネント拡張**: フィルタUIの追加
- **データクエリ最適化**: 頻度別データ取得の効率化
- **表示ロジック改善**: 混在データの適切なソート・グルーピング
- **パフォーマンス考慮**: 大量データ時の表示速度確保

**対応方針**:
1. **Phase 1**: 基本表示機能（頻度・スケジュール情報の表示）
2. **Phase 2**: フィルタリング機能（頻度別・スケジュール別選択）
3. **Phase 3**: 高度な表示機能（最新データ優先、曜日情報等）

**実装予定箇所**:
```python
# 対象ファイル  
infrastructure/visualization/dashboard_components.py
applications/dashboards/main_dashboard.py

# 主な変更点
- サイドバーにフィルタ追加
- データ取得クエリの拡張
- 表示コンポーネントの改良
```

**優先度判定**: Medium
- **影響**: ユーザビリティに直接影響するが、システム機能は正常動作
- **緊急度**: 中程度（新機能の活用に必要だが、回避策あり）
- **実装難易度**: 中程度（Streamlitの既存知識で対応可能）

**関連Issue**: I029（頻度混在データの曜日バイアス問題）の解決にも寄与

### ✅ Issue I032: カタログベース分析時のPNGファイル自動保存機能の排除必要 【High】 **解決済み**

**解決内容** (2025-08-08):

**1. フラグベース制御実装**:
- `LPPLVisualizer.__init__(save_png=False)` パラメータ追加
- デフォルトでPNG自動保存を無効化
- 必要時のみ `save_png=True` で有効化可能

**2. メモリリーク対策**:
```python
# PNG保存無効時の処理
if not self.save_png:
    plt.close(fig)  # メモリリーク防止
    return f"visualization_id_{details['id']}_no_png"
```

**3. 実測効果**:
- PNG自動生成停止により94MB（188ファイル）の容量節約
- カタログベース分析パフォーマンス向上
- Webダッシュボードとの機能重複解消

**4. 後方互換性維持**:
- 既存のコール方法はそのまま動作
- 必要時のみ明示的に `save_png=True` 指定可能
- `create_database_integrated_visualization(save_png=False)` がデフォルト

**変更ファイル**:
- `infrastructure/visualization/lppl_visualizer.py`

**検証済み**: 
- PNG自動保存がデフォルトで無効化されていることを確認
- 明示的有効化オプションが正常動作することを確認
- **パフォーマンス**: 分析実行時間の短縮
- **保守性**: ファイル管理の簡素化

**対応期限**: 2025-08-15 (1週間以内)

---

## 🗂️ 潜在的に不要な機能・ファイル調査結果（Issue I033新規作成）

### Issue I033: 4層アーキテクチャ移行後の旧ファイル・機能整理必要 【Medium】

**調査結果** (2025-08-08):

**1. 重複ディレクトリ・ファイル（統一エントリーポイント使用により不要）**:
- `examples/basic_analysis.py` - `applications/examples/basic_analysis.py`と重複
- `analysis/detailed_2016_2019_analysis.py` - 旧構造の分析スクリプト
- `analysis/quick_tc_analysis.py` - 旧構造の分析スクリプト

**2. 旧src.インポート使用ファイル（4層移行により不要）**:
- `applications/dashboards/analysis_dashboard.py` - `main_dashboard.py`で機能統合済み
- `applications/dashboards/symbol_dashboard.py` - `main_dashboard.py`で機能統合済み
- `applications/analysis_tools/consistency_checker.py` - 旧src.import
- `applications/analysis_tools/retrospective_analyzer.py` - 旧src.import
- `applications/analysis_tools/stock_analyzer.py` - `crash_alert_system.py`で機能統合済み
- `applications/analysis_tools/market_analyzer.py` - `crash_alert_system.py`で機能統合済み

**3. 旧例文ファイル（統一実行により不要）**:
- `applications/examples/crash_reproduction.py` - 旧src.import、main.py validateで代替可能
- `applications/examples/simple_1987_demo.py` - 旧src.import、main.py validateで代替可能
- `applications/examples/quick_start.py` - 旧src.import、main.py analyzeで代替可能

**4. 開発・デバッグツール（用途終了）**:
- `dev_workspace/` 配下の各種デバッグファイル
- `tools/validation/debug_beta_issue.py` - デバッグ完了済み

**影響評価**: 
- **容量削減効果**: 推定200MB以上（重複・不要ファイル削除）
- **保守性向上**: import混在問題の解消
- **実行方法統一**: entry_points/main.pyによる統一実行の徹底

**安全性確認**:
- メインダッシュボード（main_dashboard.py）が全機能を統合済み
- カタログベース分析（crash_alert_system.py）が機能統合済み
- 統一エントリーポイント（entry_points/main.py）が全実行を統合済み

**対応方針**:
1. 重複確認（統合済み機能の確認）
2. 段階的削除（カテゴリ別）
3. 実行テスト（削除後の動作確認）
4. クリーンアップ（不要インポートの整理）

**検証方法**:
1. カタログベース分析実行前後でのファイル数確認
2. ストレージ使用量の測定
3. 分析実行時間の比較測定

### Issue I033: ダッシュボード Price&Prediction タブの包括的UI改善必要 【High】

**現状の問題**:
Price & Prediction タブにおける複数のUI/UX問題と機能不備：

**1. Individual Fitting Results の Future Period 未表示**:
- 現在の実装では各個別プロットにLPPL Fit (Future Period) が表示されない
- Market Data with LPPL Predictions では実装済みだが、Individual Fitting Results では未対応
- フィッティング基準日以降の予測表示が不完全

**2. 縦線ホバー機能の不具合**:
- 予測日の縦線にカーソルを合わせた際の情報表示機能が機能していない
- Plotlyの制約により実装困難な可能性
- 機能していない場合は適切な削除が必要

**3. Number of Results 仕様の誤解と不適切実装**:
- **現在の実装**: 常に10個分のプロットで、Number of Resultsは古いデータ選択範囲のみ変更
- **意図された仕様**: 最新データから指定数まで遡ったプロット表示
- Individual Fitting Results でも同様の問題が発生している可能性

**4. 期間選択機能の不備**:
- **要求される新仕様**: Number of Results → 基準日ベース期間選択への変更
- **開始基準日**: 最新の基準日（初期値: データのある最新基準日）
- **終了基準日**: 遡り基準日（標準: 4ヶ月前の基準日）
- **機能**: サイドバーでの開始・終了期間の変更可能性

**5. Individual Fitting Results のプロット数制限未実装**:
- 新しい期間選択機能実装により、プロット数が過多になる懸念
- パフォーマンスとUX観点での制限機能が必要
- 適切な表示数制限とページネーション機能の検討が必要

**影響範囲**:
- ユーザビリティ: 期待された機能と異なる動作
- データ可視化: 不完全な予測表示
- システムパフォーマンス: 大量プロット時の負荷増加
- 科学的正確性: Future Period表示による予測範囲の明確化

**対応方針**:

**Phase 1: 機能修正**:
1. Individual Fitting Results への Future Period 追加実装
2. 縦線ホバー機能の動作確認と適切な削除
3. Number of Results の動作仕様確認と修正

**Phase 2: 期間選択機能実装**:
1. サイドバーUI拡張（基準日選択機能）
2. 基準日ベースのデータフィルタリング実装
3. プロット範囲の動的調整機能

**Phase 3: パフォーマンス最適化**:
1. Individual Fitting Results のプロット数制限実装
2. 段階的表示・ページネーション機能
3. レスポンシブ表示の最適化

**技術的課題**:
- Plotlyホバー機能の技術的制約確認
- 基準日ベースのデータクエリ最適化
- 大量プロット時のメモリ・CPU使用量制御
- ユーザー体験を損なわない制限機能設計

**優先度判定**: High
- **ユーザビリティ**: 期待機能との乖離が大きい
- **科学的正確性**: Future Period表示による予測精度向上
- **システム設計**: 現在の仕様理解と改善が急務

**対応期限**: 2025-08-20 (2週間以内)

**検証方法**:
1. 各個別プロットでのFuture Period表示確認
2. サイドバー期間選択機能の動作テスト  
3. プロット数制限機能の負荷テスト
4. ユーザビリティテストによる仕様確認

### Issue I041: 高確度クラッシュ予測銘柄の効率的選択機能未実装 【Medium】

**現状の問題**:
データ量増加に伴い、現在の銘柄選択方法では効率的な分析が困難になる将来的な問題：

**1. 現在の選択方法の限界**:
- **手動選択**: サイドパネルでの単一銘柄選択のみ
- **順次確認**: 各銘柄を個別に確認する必要がある
- **優先度不明**: 高リスク銘柄の識別が困難
- **時間効率**: 重要な銘柄の見落としリスク

**2. 必要な機能要件**:
- **高確度予測フィルタ**: R² > 0.8, 近日tc予測等の条件での自動絞り込み
- **リスクレベル別表示**: CRITICAL/HIGH優先での銘柄リスト
- **近日予測優先**: tc < 30日等の緊急度別表示
- **従来方法との切替**: 現在の全銘柄表示との選択可能な切替機能

**3. 想定される実装案**:
```
サイドパネル機能拡張:
┌─ 銘柄選択モード ─────────────┐
│ ○ 標準選択 (現在の方法)        │
│ ○ 優先度フィルタ              │
│   ├─ 🔴 高リスク (R²>0.8)     │  
│   ├─ ⏰ 近日予測 (<30日)       │
│   └─ 📊 収束予測 (複数一致)    │
└─────────────────────────────┘
```

**4. 技術的課題**:
- **リアルタイム計算**: 条件に合致する銘柄の動的抽出
- **パフォーマンス**: 全銘柄スキャン時の処理速度確保
- **UI設計**: 直感的な切替インターフェース
- **設定保持**: ユーザーの選択モード記憶機能

**対応方針**:
1. **Phase 1**: 要件定義・UI設計
2. **Phase 2**: バックエンド条件抽出機能実装
3. **Phase 3**: フロントエンド切替UI実装
4. **Phase 4**: 設定保持・パフォーマンス最適化

**優先度判定**: Medium
- **現時点**: 現在の銘柄数では手動選択で対応可能
- **将来重要性**: データ量増加時の実用性に直結
- **ユーザー体験**: 分析効率の大幅向上が期待される

**対応期限**: 将来実装（データ量が現在の2-3倍になった時点で着手）

**関連Issue**: I025（マーケットデータカタログシステムの統合完了後に実装）

---

### 🔄 **Issue I041 実装方針詳細化** 【2025-08-08更新】

**具体的実装方針**:
従来のSymbol Selection（Category分け・Symbol選択）は踏襲しつつ、**Symbol Sort機能**を追加実装：

#### 1. **Symbol Sort機能の詳細設計**

**サイドバー新機能**:
```
┌─ Asset Category ────────────────┐
│ ○ All Symbols                  │
│ ○ US Indices                   │  ← 既存機能
│ ○ Crypto Assets                │
└─────────────────────────────────┘

┌─ Symbol Sort ──────────────────┐
│ ○ 最も差し迫った予測順           │  ← NEW!
│ ○ 最も確度の高い予測順           │
│ ○ 複合優先度順                  │
│ ○ 過去最高確度順                │
│ ○ デフォルト順（アルファベット）  │
└─────────────────────────────────┘

┌─ Selected Symbol ──────────────┐
│ [動的ソートされたリスト表示]     │  ← 既存機能拡張
└─────────────────────────────────┘
```

#### 2. **ソート基準の定義**

**A. 最も差し迫った予測順**:
- 基準: `min(Days from Today)` where `Days from Today > 0`
- 条件: 未来予測のうち最も近い日付順
- 用途: 緊急対応が必要な銘柄の特定

**B. 最も確度の高い予測順**:
- 基準: `max(R² Score)` for future predictions
- 条件: 未来予測のR²値降順
- 用途: 信頼性の高い予測の優先確認

**C. 複合優先度順**:
- 基準: `Composite Score = R² * (1/Days from Today) * Quality Weight`
- 条件: 確度・緊急性・品質の複合評価
- 用途: 総合的な投資判断優先順位

**D. 過去最高確度順**:
- 基準: `max(R² Score)` for all analyses (past + future)
- 条件: 全期間でのR²値最高順
- 用途: モデル性能評価・手法検証

#### 3. **Analysis Period Selection連動**

**重要な設計原則**:
- **ソート対象データ**: サイドバーのAnalysis Period Selectionと**完全連動**
- **期間絞り込み**: 選択期間内のデータのみを対象にソート
- **動的更新**: 期間変更時にソート順も自動更新
- **カテゴリ連動**: Asset Category選択と組み合わせて動作

**実装例**:
```python
# 疑似コード例
def get_sorted_symbols(asset_category, sort_method, period_start, period_end):
    # 1. カテゴリでフィルタリング
    if asset_category != "All Symbols":
        filtered_symbols = symbols_in_category[asset_category]
    
    # 2. 期間でデータ絞り込み
    period_data = get_analysis_data(filtered_symbols, period_start, period_end)
    
    # 3. ソート基準でランキング
    if sort_method == "最も差し迫った予測順":
        return sort_by_min_days_to_crash(period_data)
    elif sort_method == "最も確度の高い予測順":
        return sort_by_max_r_squared(period_data)
    # ... etc
```

#### 4. **技術的実装課題**

**リアルタイム計算**:
- **キャッシュ戦略**: ソート結果の適切なキャッシュ
- **増分更新**: 期間変更時の効率的な再計算
- **パフォーマンス**: 大量銘柄時の応答速度確保

**UI/UX設計**:
- **直感的操作**: ソート基準の分かりやすい名称・説明
- **状態保持**: ユーザーの選択設定記憶機能
- **視覚的フィードバック**: ソート中のローディング表示

#### 5. **段階的実装計画**

**Phase 1** (基盤実装):
1. Symbol Sortサイドバーコンポーネント作成
2. 基本ソート機能実装（差し迫った予測順・確度順）
3. Analysis Period Selection連動機能

**Phase 2** (高度機能):
1. 複合優先度スコア計算アルゴリズム実装
2. 過去データ包含ソート機能
3. パフォーマンス最適化・キャッシュ実装

**Phase 3** (UX向上):
1. ソート設定保持機能
2. ソート理由の表示機能（なぜこの順序なのかの説明）
3. カスタムソート設定機能（重み調整等）

**実装優先度**: Medium → High（データ量が現在の2倍に到達時）

### Issue I042: Priority Filter実装の科学的妥当性に問題・予測精度劣化リスク 【High】

**現状の問題実装**:
現在のPriority Filterには科学的予測評価として致命的な問題がある：

**1. 不適切な基準日設定**:
```python
# 問題のある現在の実装
if priority_filter == "Critical Only (≤30 days)":
    analysis_data = analysis_data[
        analysis_data['predicted_crash_date'].apply(
            lambda x: (x - datetime.now()).days <= 30  # ← 本日基準
        )
    ]
```

**2. 予測精度劣化を無視**:
- **フィッティング基準日**: 例えば2ヶ月前（2025-06-08）
- **予測クラッシュ日**: 2025-09-01（本日から30日後）
- **現在の判定**: "Critical Only (≤30 days)" でフィルタリング対象
- **実際の問題**: 2ヶ月前の予測が現在も有効として扱われる

**3. 科学的問題点**:

**A. 時間経過による精度劣化**:
- **LPPL予測の前提**: フィッティング時点のデータに基づく短期予測
- **現実**: 時間経過とともに市場条件変化・予測精度低下
- **理論的根拠**: Sornette理論では予測期間の制限が重要

**B. 信頼性の低い予測混入**:
- **古いフィッティング**: 1-3ヶ月前のフィッティング結果も含まれる
- **データ鮮度**: 最新市場動向を反映していない予測
- **予測品質**: R²値は高くても時間経過により実用性低下

**C. 投資判断への悪影響**:
- **False Positive**: 実際には信頼性の低い「緊急」警告
- **リスク評価**: 過大・過小評価された市場リスク
- **トレーディング**: 不適切なタイミングでのポジション変更

**4. 改善提案**:

**A. フィッティング基準日ベースフィルタリング**:
```python
# 改善案: 2段階フィルタリング
# Step 1: フィッティングの鮮度確認
recent_fitting = analysis_data[
    (datetime.now() - analysis_data['analysis_basis_date']).dt.days <= 30
]

# Step 2: 予測期間フィルタリング  
priority_filtered = recent_fitting[
    recent_fitting['predicted_crash_date'].apply(
        lambda x: (x - datetime.now()).days <= 30
    )
]
```

**B. 予測有効期限の導入**:
- **有効期限**: フィッティング基準日から30-60日間
- **期限切れ表示**: 古い予測の明示的な警告
- **自動除外**: 有効期限切れ予測の自動非表示

**C. 品質重み付け**:
- **R²値考慮**: 高品質予測の優先表示
- **データ鮮度**: 新しいフィッティングの重み増加
- **複合評価**: 品質・鮮度・緊急性の総合判定

**5. 対応方針**:

**緊急対応** (1週間以内):
1. 現在のPriority Filterに警告メッセージ追加
2. フィッティング基準日情報の表示強化
3. ユーザーへの注意喚起実装

**根本修正** (2週間以内):
1. 2段階フィルタリング実装
2. 予測有効期限機能実装
3. 品質重み付け機能実装

**検証・テスト**:
1. 過去データでの予測精度劣化測定
2. 時間経過による実際の予測成功率検証
3. 改修前後の予測品質比較

**優先度判定**: High
- **科学的正確性**: 予測システムの根幹に関わる問題
- **実用性**: 投資判断への直接的悪影響
- **緊急性**: 現在進行形で不適切な予測評価が発生中

**関連Issue**: 
- I041（Symbol Sort機能）: 適切な予測品質評価基準の共有が必要
- I022（NASDAQ高リスク検証）: 古い予測の信頼性評価との関連性

### Issue I043: バッチデータ取得機能実装（backfill-v2） 【High】

**問題の背景**:
現在のバックフィル処理は各期間・各銘柄ごとにAPIコールを実行するため、効率が悪い：
- **現状**: N期間 × 87銘柄 = N×87回のAPIコール
- **Alpha Vantage**: 5 calls/min制限で処理時間が膨大
- **CoinGecko**: 20 calls/minだが365日制限あり

**提案する解決策**:
`backfill-v2`として新機能を実装し、将来的に既存backfillを置き換え

**1. 基本設計**:
```
Symbol1 → 1回のAPI Call(3年分) → Period1,2,3...で分割利用
Symbol2 → 1回のAPI Call(3年分) → Period1,2,3...で分割利用
効果: N×87回 → 87回 (N倍の効率化)
```

**2. API別対応策**:
- **FRED**: 制限なし、最大期間取得
- **Alpha Vantage**: outputsize='full'で20年分一括取得
- **CoinGecko**: 365日制限のため複数回分割取得して結合

**3. 実装計画**:

**Phase 1: プロトタイプ実装** (1週間):
1. バッチデータキャッシュ層の設計・実装
2. CoinGecko複数回取得・結合ロジック
3. 既存LPPL分析との統合インターフェース
4. データ不足時の適切な処理中断機能

**Phase 2: 本実装** (1週間):
1. `scheduled-analysis backfill-v2`コマンド実装
2. 進捗表示・エラーハンドリング
3. 既存重複防止機構との統合
4. APIレート制限管理の統合

**Phase 3: テスト・検証** (3日):
1. 小規模データセットでの動作確認
2. API効率化の実測値計測
3. 既存backfillとの結果一致性検証
4. エラー処理・復旧機能テスト

**Phase 4: ドキュメント更新** (2日):
1. CLAUDE.md更新
2. 実装仕様書作成
3. USER_EXECUTION_GUIDE.md更新
4. 進捗管理ファイル更新

**4. 成功基準**:
- APIコール数: N×87回 → 87回以下に削減
- 処理時間: 50%以上短縮
- データ品質: 既存backfillと完全一致
- エラー耐性: データ取得失敗時の適切な中断

**5. リスクと対策**:
- **メモリ使用量増加**: 大量データの一時保存 → 段階的メモリ管理
- **API制限違反**: 一括取得の負荷 → 適切な待機時間設定
- **既存システム影響**: 競合可能性 → 完全独立実装

**対応開始日**: 2025-08-09
**目標完了日**: 2025-08-25

**担当**: Claude Code + プロジェクトオーナー確認

### Issue I043: LPPL分析失敗データの記録・管理システム未実装 【High】

**現状の問題**:
LPPLフィッティング処理において、以下の重要な問題が存在する：

**1. 分析失敗データの記録欠如**:
```python
# 現在の処理（問題のある実装）
def analyze_period(self, symbol, period_date):
    try:
        result = self.fitter.fit_lppl_model(data)
        self.save_analysis_result(result)  # 成功時のみ保存
        return True
    except Exception as e:
        print(f"❌ Analysis failed for {period_date}")
        return False  # ← 失敗データが完全に記録されない
```

**2. システム完全性への影響**:
- **重複試行リスク**: 同一期間・銘柄で失敗した分析の再実行時の非効率
- **進捗追跡不完全**: 実際の処理状況（成功/失敗率）が不可視
- **バックフィル時の問題**: 過去に失敗したデータの再試行制御不能
- **定期実行時の問題**: 継続的に失敗するデータの効率的スキップ不可能

**3. 分析品質管理への影響**:
- **失敗パターン分析不可**: どの市場条件でLPPLが機能しないか不明
- **モデル改善阻害**: 失敗原因の体系的分析機会の喪失
- **データ品質評価不足**: 銘柄別・期間別の適合性評価不可能

**4. ダッシュボード表示への潜在的影響**:
- **データ欠落の不可視性**: ユーザーが分析結果の「穴」を認識不能
- **期間選択時の問題**: 失敗期間を含む期間選択時の表示異常リスク
- **統計情報の不正確性**: 成功データのみに基づく偏った統計

**5. 提案する解決策**:

**A. 分析失敗記録テーブルの実装**:
```sql
-- 新規テーブル設計案
CREATE TABLE analysis_failures (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    symbol TEXT NOT NULL,
    analysis_basis_date DATE NOT NULL,
    analysis_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    failure_reason TEXT NOT NULL,
    error_details TEXT,
    data_period_days INTEGER,
    retry_count INTEGER DEFAULT 0,
    last_retry_date TIMESTAMP,
    is_permanent_failure BOOLEAN DEFAULT FALSE,
    UNIQUE(symbol, analysis_basis_date)
);
```

**B. 統合データアクセス設計**:
```python
# 改善案
class AnalysisResultManager:
    def get_analysis_status(self, symbol, basis_date):
        """分析状況を統合取得（成功/失敗/未実行）"""
        success = self.get_successful_analysis(symbol, basis_date)
        if success:
            return {"status": "success", "data": success}
        
        failure = self.get_analysis_failure(symbol, basis_date)
        if failure:
            return {"status": "failed", "reason": failure.failure_reason}
        
        return {"status": "not_attempted"}
    
    def should_retry_analysis(self, symbol, basis_date):
        """再試行すべきか判定"""
        failure = self.get_analysis_failure(symbol, basis_date)
        if not failure:
            return True
        if failure.is_permanent_failure:
            return False
        return failure.retry_count < MAX_RETRIES
```

**C. ダッシュボード表示対応**:
- **失敗データ表示**: 分析失敗期間の明示的な表示
- **成功率統計**: 銘柄別・期間別の分析成功率表示
- **データ完全性インジケータ**: 期間選択時の成功/失敗/欠落状況表示

**6. 実装計画**:

**Phase 1: 基盤実装** (1週間):
1. `analysis_failures` テーブル設計・作成
2. 失敗データ記録機能実装
3. 既存分析ワークフローとの統合

**Phase 2: 管理機能実装** (1週間):
1. 再試行制御ロジック実装
2. 永続失敗判定機能実装
3. 統合データアクセスAPI実装

**Phase 3: ダッシュボード統合** (1週間):
1. 失敗データ表示機能実装
2. 成功率統計表示実装
3. データ完全性インジケータ実装

**7. 成功基準**:
- **完全記録**: 全ての分析試行（成功/失敗）が記録される
- **効率化**: 重複試行の削減により処理時間短縮
- **透明性**: ダッシュボードでデータ欠落状況が可視化される
- **品質向上**: 失敗パターン分析によるモデル改善指針獲得

**8. リスク評価**:
- **データベース容量**: 失敗データの蓄積による容量増加 → 定期クリーンアップ機能
- **処理オーバーヘッド**: 失敗記録処理の追加コスト → 最適化された記録処理
- **既存データ**: 過去の失敗データは記録不可能 → 将来分のみ対象

**対応優先度**: High
- **データ完全性**: システムの根幹的品質に関わる
- **運用効率**: バックフィル・定期実行の効率化に直結
- **将来影響**: データ量増加時により深刻な問題となる

**対応期限**: 2025-08-30 (3週間以内)

### Issue I044: ドキュメント重複・矛盾・実装乖離の包括的問題 【High】

**現状の問題**:
**Claude Code による2025-08-09全ドキュメント精査結果**、プロジェクト全体で重大なドキュメント品質問題を発見：

**A. プロジェクト構造の重大な矛盾**:

**1. srcディレクトリ問題**:
- **ドキュメント記載**: README.md・implementation_strategy.md・USER_EXECUTION_GUIDE.mdで`src/`ディレクトリを頻繁に参照
- **実際の構造**: `src/`ディレクトリは存在せず、4層アーキテクチャ（core/applications/infrastructure/entry_points）に移行済み
- **矛盾例**:
  ```
  # README.md (49行目) - 誤情報
  ├── src/                          # ソースコード ← 存在しない
  │   ├── main.py                   # エントリポイント
  │   ├── fitting/                  # LPPLフィッティング
  
  # 実際の構造
  ├── core/                         # 科学的中核
  │   ├── fitting/                  # 実際の場所
  ```

**2. 統一エントリーポイント誤表記**:
- **implementation_strategy.md**: `src/main.py` を エントリポイントとして記載
- **実際の実装**: `entry_points/main.py` が正しい統一エントリポイント
- **影響**: ユーザーが間違ったファイルを実行する可能性

**B. 実装とドキュメントの乖離**:

**1. カタログ銘柄数の誤差**:
- **CLAUDE.md**: 「87銘柄・12カテゴリカタログ（v4.0拡張完了）」
- **USER_EXECUTION_GUIDE.md**: 「16銘柄（実測値）」「25銘柄」等の混在表記
- **実際のカタログ**: 78銘柄（market_data_catalog.json実測値）
- **メタデータ**: "total_symbols": 81（JSONメタデータ）

**2. API戦略の記述不統一**:
- **implementation_strategy.md**: 「排他的API設計（一つのAPIプロバイダーを排他的に割り当て）」
- **数式実装**: `core/fitting/utils.py` Sornette論文数式の正確実装
- **CLAUDE.md**: 「FRED互換データ形式」等の混在記述

**C. 陳腐化した情報**:

**1. 論文再現検証コマンド**:
- **旧ドキュメント**: `python tests/historical_crashes/black_monday_1987_validator.py`
- **✅ 修正済み**: `python entry_points/main.py validate --crash 1987`
- **重要度**: 科学的根幹保護の中核機能

**2. バックフィル機能表記**:
- **USER_EXECUTION_GUIDE.md**: `backfill_v2`・`backfillbatch` 等の混在表記
- **実際のコマンド**: `backfillbatch` のみ実装

**D. メタデータ整合性の問題**:

**1. 日付・バージョン情報**:
- **最終更新日**: 各ドキュメントで不統一（2025-08-01～2025-08-08）
- **バージョン管理**: 実装進捗とドキュメント更新の乖離

**2. 依存関係表記**:
- **requirements.txt参照**: 複数ドキュメントで言及も実際のファイル確認未実施
- **API認証設定**: .envファイル構成の説明と実装に齟齬の可能性

**影響範囲**:

**1. 開発効率への影響**:
- **新規開発者**: 誤ったディレクトリ構造理解による混乱
- **Claude Code**: 不正確なドキュメント参照による実装ミス
- **保守作業**: 矛盾する情報による修正方針の迷い

**2. システム品質への影響**:
- **実行ミス**: 間違ったコマンド・パスによる実行失敗
- **論文再現**: 重要な検証プロセスの実行失敗リスク
- **統一性欠如**: プロジェクト全体の信頼性低下

**対応方針**:

**Phase 1: 緊急修正** (1週間以内):
1. **構造表記統一**: 全ドキュメントのsrc→4層アーキテクチャ表記修正
2. **コマンド修正**: 統一エントリーポイントベースコマンド表記統一
3. **銘柄数修正**: 正確な78銘柄表記への統一

**Phase 2: 詳細検証** (2週間以内):
1. **実装検証**: 各ドキュメント記載内容と実装の詳細照合
2. **API戦略確認**: 排他的設計の正確な記述・実装検証
3. **メタデータ統一**: バージョン・日付情報の統一管理

**Phase 3: 品質向上** (3週間以内):
1. **継続的整合性**: ドキュメント・実装同期機能の検討
2. **検証プロセス**: 定期的な整合性チェック手順確立
3. **標準化**: ドキュメント作成・更新ルールの明文化

**緊急度判定**: High
- **直接影響**: ユーザー実行・開発者理解に直結
- **科学的根幹**: 論文再現機能実行に影響
- **プロジェクト信頼性**: 全体品質への影響大

**対応期限**: 2025-08-20 (2週間以内・緊急修正)

**関連Issue**: 
- I013（データベース重複防止機能）: 統合データ管理の一環
- I042（Priority Filter科学的妥当性）: 品質管理機能の強化

---

## 🔄 Issue番号重複問題の分析結果（2025-08-09調査）

### **問題の詳細分析**

**Claude Code による調査結果**:
解決済みIssueアーカイブ過程で番号が重複使用されていることが判明。

**重複が確認された主要番号**:
- **I043**: 最も重複が多い番号
  1. I043 (解決済み・移動): LPPL分析失敗データの記録・管理システム未実装 ← 現在アクティブ
  2. I043 (過去・アーカイブ済み): バッチデータ取得機能実装（backfill-v2）← 既解決でbackfillbatchに発展
  3. 他にもI043が複数回使用された可能性

**その他重複可能性番号**:
- I032-I042の範囲で解決・アーカイブ移動による番号重複の可能性
- 解決済みIssue移動時に古い番号が再利用されるパターン

### **重複発生の原因**

**技術的原因**:
1. **解決済みIssue移動**: 「アクティブなIssue」→「解決済みIssue」移動時の番号空番化
2. **アーカイブ処理**: 古い解決済みIssueのarchive移動時の番号再利用
3. **手動管理**: 自動連番機能未実装による手動管理の限界

**プロセス的原因**:
1. **番号管理不統一**: 解決済みIssue移動時の番号維持ルール不明確
2. **アーカイブ判断**: どの時点でarchive移動するかの基準不統一
3. **トラッキング不足**: 使用済み番号の一元管理不足

### **改善策の実装**

**即効性対策**:
1. **次回使用ID明示**: I044から再開（2025-08-09時点）
2. **永続番号原則**: 一度使用した番号は完全使用禁止
3. **使用履歴管理**: 使用済み番号の明確な記録保持

**長期的改善策**:
1. **自動連番システム**: 手動管理からシステム化への移行検討
2. **アーカイブルール明確化**: 解決から6ヶ月後等の明確な基準設定
3. **重複検出機能**: 新規Issue作成時の重複番号チェック機能

### **過去の重複Issueへの対応方針**

**アクティブIssue優先原則**:
- 現在アクティブなIssueが正式版として継続
- 過去のarchive済みIssueは参考情報として保持
- 混乱回避のため過去の番号変更は実施しない

**文書整合性の確保**:
- 関連文書での番号参照時は日付併記を推奨
- 重複の可能性がある場合は「I043 (2025-08-09版)」等で識別
- archive文書では「旧I043」「新I043」等の区別表記

---

## ⏱️ 現在のbackfillbatch完了予測（2025-08-09現在）

### **進捗状況実測データ**

**実行開始**: 2025-08-09 (コマンド: `python entry_points/main.py scheduled-analysis backfillbatch --start 2023-01-01 --end 2025-08-09`)

**現在の進捗** (2025-08-09 16:14時点):
- **処理済み**: DJIA完了 (4/78シンボル)、DJTA処理中 (5/78シンボル)  
- **DJTA進捗**: 63/136期間完了、残り73期間
- **システム表示**: 5.1% complete, ETA 293.9 minutes remaining

### **完了予測計算**

**A. 処理速度実測値**:
- **DJIA**: 136期間を約45分で完了 (LPPL失敗4期間含む)
- **平均期間処理時間**: 約20秒/期間 (成功時)、5秒/期間 (失敗時)
- **シンボル間移行時間**: 約3-5分 (データ取得・準備時間)

**B. 残り作業量**:
- **全体**: 78シンボル × 136期間 = 10,608分析
- **完了済み**: DJIA(136) + DJTA(63) = 199分析
- **残り**: 10,608 - 199 = 10,409分析

**C. LPPL失敗率考慮**:
- **観測失敗率**: 約5-8% (DJIA: 4/136, DJTA: 15/63)
- **成功分析**: 10,409 × 0.93 = 9,680分析 × 20秒 = 3.2時間
- **失敗分析**: 10,409 × 0.07 = 729分析 × 5秒 = 1時間
- **シンボル移行**: 73シンボル × 4分 = 4.9時間

### **完了時刻予測**

**計算根拠**:
- **実測処理時間**: 3.2 + 1 + 4.9 = 9.1時間
- **システムオーバーヘッド**: +20% = 10.9時間
- **API制限待機**: 一部CoinGeckoで追加待機 = +1-2時間

**予測完了時刻**:
- **楽観的予測**: 2025-08-10 03:00-04:00頃 (約11-12時間後)
- **現実的予測**: 2025-08-10 04:00-06:00頃 (約12-14時間後)
- **保守的予測**: 2025-08-10 06:00-08:00頃 (約14-16時間後)

### **進捗監視推奨**

**チェックポイント**:
- **2025-08-10 01:00**: 約15-20シンボル完了想定
- **2025-08-10 03:00**: 約40-50シンボル完了想定  
- **2025-08-10 05:00**: 約65-75シンボル完了想定

**予測精度向上**:
現在のシステム表示ETA（293.9分）は楽観的すぎる可能性。実際はCoinGecko制限やエラーハンドリングでより長時間要する見込み。

---

## Issue解決の傾向分析

### カテゴリ別Issue分布
- **フィッティング関連**: 3件 (60%)
- **システム設計**: 1件 (20%)
- **データ処理**: 1件 (20%)

### 根本原因分析
1. **最適化アルゴリズムの限界** - 非線形最適化の難しさ
2. **パラメータ間の相関** - 独立した推定が困難
3. **理論と実装のギャップ** - 論文の詳細が不明確

---

## 今後の予防策

1. **コードレビュープロセス** - 実装前の設計レビュー
2. **段階的テスト** - 小さな変更ごとの動作確認
3. **ドキュメント充実** - 実装の意図を明確に記録

---

## 関連リンク

- [進捗管理ファイル](./CURRENT_PROGRESS.md)
- [プロジェクト仕様書](../implementation_strategy.md)
- [数学的基礎](../mathematical_foundation.md)

---

## 📚 論文との乖離管理

### 現在の論文乖離状況

| 論文 | 箇所 | 論文値 | 現在実装 | 誤差率 | 状況 |
|------|------|----------|------------|--------|------|
| Sornette_2004 | 式(54), βパラメータ | 0.33 | 0.33 | 0.0% | ✅ 解決済 |

### 検証基準
- **合格基準**: 誤差率 < 5%
- **警告レベル**: 誤差率 5-10%
- **致命的レベル**: 誤差率 > 10%

### 検証方法
1. **数値検証**: 論文報告値との直接比較
2. **統計検証**: 範囲・分布の整合性
3. **定性検証**: パラメータ間の相関・傾向の一致

---

*最終更新: 2025-08-02 (夕方) by Claude Code*