# 現在のIssue管理ファイル

## 【重要】このファイルの編集ルール

### Claude Code による自律的管理のためのガイドライン

1. **編集前の必須確認事項**
   - 必ず編集前にこのファイル全体を Read ツールで読み込むこと
   - 既存のissueの状態を確認すること
   - 重複するissueがないか確認すること

2. **Issue管理のルール**
   - 新規issueは「アクティブなIssue」セクションに追加
   - 解決したissueは「解決済みIssue」に移動（最新10件のみ保持）
   - 古い解決済みissueは archives/ にアーカイブ
   - Issue IDは連番で管理（I + 3桁の数字）

3. **優先度の定義**
   - 🔴 Critical: システムが動作しない、予測が全く機能しない
   - 🟠 High: 精度に大きく影響、実用性を阻害
   - 🟡 Medium: 改善が望ましい、将来的な問題
   - 🟢 Low: 細かい改善点、nice to have

4. **科学的根拠の管理**
   - 論文との乖離は必ず Issue として記録
   - 関連論文とその箇所を明記
   - 定量的な乖離を数値で記録
   - 解決時は論文との一致を必ず検証

---

## Issue統計サマリー

- **総アクティブIssue数**: 15
- **Critical**: 1
- **High**: 5  
- **Medium**: 9  
- **Low**: 0
- **今週解決**: 5
- **平均解決時間**: 1日

---

## アクティブなIssue

### 🔴 Critical Issues

| Issue ID | タイトル | 詳細 | 発生日 | 影響範囲 | ステータス |
|----------|---------|------|--------|----------|-----------| 
| I017 | プロジェクト構造破綻問題 | ルート直下に多数のPythonファイル散在・src/以下の定義構造から逸脱・バックエンド/フロントエンド分離未実装・保守性著しく低下 | 2025-08-04 | プロジェクト全体の保守性 | 緊急対応必要 |

---

### 🟠 High Priority Issues

| Issue ID | タイトル | 詳細 | 発生日 | 影響範囲 | ステータス |
|----------|---------|------|--------|----------|-----------|
| I008 | 可視化要件不明確問題 | 表示すべき内容・UI要件の整理が不十分で実装が非効率 | 2025-08-02 | 可視化システムの品質 | 要件定義必要 |
| I009 | 定期フィッティングシステム未設計 | 継続的なクラッシュ予測のためのスケジュールシステムが未実装 | 2025-08-02 | 実用システム運用 | 設計段階 |
| I002 | ローカルミニマム問題 | 最適化が局所最適解に陥りやすい | 2025-01-22 | パラメータ推定の信頼性 | 調査中 |
| I003 | パラメータ不安定性 | 時間窓の変更でパラメータが大きく変動 | 2025-01-22 | 予測の一貫性 | 未着手 |
| I018 | データフロー・形式標準化未実装 | データ形式・フロー定義が分散・変更リスク・トラブル原因 | 2025-08-04 | システム安定性 | 設計段階 |

---

### 🟡 Medium Priority Issues

| Issue ID | タイトル | 詳細 | 発生日 | 影響範囲 | ステータス |
|----------|---------|------|--------|----------|-----------|
| I010 | 現在の可視化ツールの動作検証未完了 | Streamlitダッシュボードの正しい動作確認が未完了 | 2025-08-02 | ユーザー体験 | 検証必要 |
| I004 | データ前処理の不統一 | 対数変換やスケーリングの方法が統一されていない | 2025-01-22 | 再現性 | 未着手 |
| I005 | リアルタイム処理未実装 | 自動監視システムが完成していない | 2025-01-22 | 実運用 | 設計段階 |
| I011 | 可視化表示制御のロバスト性 | データ欠損時の表示エラー対策・フィルタリング異常時の対処が必要 | 2025-08-03 | 可視化品質 | 未着手 |
| I012 | scheduled_nasdaq_analysis.py実装バグ | save_analysis_resultメソッドが存在せず、save_lppl_analysisが正しい | 2025-08-03 | スケジュール実行 | ✅ 解決済 |
| I013 | データベース重複防止機能未実装 | 同一条件での解析重複実行時に同じデータが複数保存される | 2025-08-03 | データ整合性 | 設計必要 |
| I014 | プロジェクト内不要ファイル蓄積 | debug/demo/test用の一時ファイルが多数蓄積しプロジェクト把握を困難化 | 2025-08-03 | 保守性・可読性 | ✅ 解決済 |
| I015 | scheduled_nasdaq_analysis.py環境変数未読み込み | dotenvによる.env読み込み処理が欠如でAPI認証失敗 | 2025-08-03 | 実行失敗 | ✅ 解決済 |
| I016 | データソース管理の体系化未実装 | 銘柄・API対応が分散管理で重複取得リスク・メタ情報不透明 | 2025-08-03 | データ効率性・UX | 要件定義完了 |
| I019 | ParametersタブData Period表示問題 | data_start・data_end・period_daysが全てN/A表示・データ存在するが表示されない | 2025-08-04 | ダッシュボード機能性 | 調査中 |

---

## 解決済みIssue（最新10件）

| 解決日 | Issue ID | タイトル | 解決方法 | 解決時間 | 学習事項 |
|--------|----------|---------|----------|----------|----------|
| 2025-08-04 | I020 | ダッシュボードパフォーマンス問題 | pandas apply()をベクトル化処理・リスト内包表記に変更、重い処理を最適化 | 0.5日 | apply()は行ごと処理で重い。ベクトル化・並列処理で大幅高速化可能 |
| 2025-08-04 | I021 | Timestamp型エラー問題 | pandas.Timestamp→python datetime変換を統一・plotly互換性対応完了 | 0.5日 | 異なるライブラリ間での日時型変換は統一処理が必須 |
| 2025-08-02 | I011 | matplotlib GUIスタック問題 | matplotlib.use('Agg')でGUI無しのヘッドレスモードで実装 | 1日 | 自動化環境でのGUIライブラリ使用時はヘッドレスモードが必須 |
| 2025-08-02 | I012 | 結果データの永続化未実装 | SQLiteデータベースとStreamlitダッシュボードで解決 | 1日 | リアルタイム結果参照にはデータベース永続化が不可欠 |
| 2025-08-02 | I013 | 論文再現保護体制不完全 | CLAUDE.md・README.md・実装戦略文書に保護方針を明記 | 0.5日 | 科学的根幹の明確な保護方針と検証プロトコルが開発の最優先事項 |

---

## 🔥 重要Issue詳細解説

### Issue I017: プロジェクト構造破綻問題 【Critical】

**現状の問題**:
- ルートディレクトリに散在するファイル群:
  - `scheduled_*.py` (解析スケジュール)
  - `demo_*.py` (デモ・テスト)
  - `debug_*.py` (デバッグ)
  - `test_*.py` (テスト)
  - `run_*.py` (実行)
  - `create_*.py` (作成)
- 想定されていた `src/` 構造からの逸脱
- バックエンド・フロントエンド混在

**対応方針**:
1. **フォルダ構造再設計**: バックエンド/フロントエンド分離
2. **段階的移行**: 既存動作を保証しながら整理
3. **コード解析**: Agent toolを活用した現状把握
4. **データフロー文書化**: 変更リスク回避

### Issue I018: データフロー・形式標準化未実装 【High】

**現状の問題**:
- データ形式定義が分散
- フローが暗黙知化
- 変更時のトラブルリスク高

**対応方針**:
1. **現状データフロー解析**: Agent toolによる自動解析
2. **標準化仕様策定**: 形式・インターフェース定義
3. **変更管理プロセス**: 安全な変更手順確立

### Issue I019: ParametersタブData Period表示問題 【Medium】

**現状の問題**:
- データベースには `data_period_start`, `data_period_end` 存在
- 表示処理で `N/A` となる
- 日付フォーマット処理の問題

**対応方針**:
1. **データ変換処理デバッグ**: 型変換・エラーハンドリング確認
2. **表示ロジック修正**: 安全な日付処理実装

---

## Issue解決の傾向分析

### カテゴリ別Issue分布
- **フィッティング関連**: 3件 (60%)
- **システム設計**: 1件 (20%)
- **データ処理**: 1件 (20%)

### 根本原因分析
1. **最適化アルゴリズムの限界** - 非線形最適化の難しさ
2. **パラメータ間の相関** - 独立した推定が困難
3. **理論と実装のギャップ** - 論文の詳細が不明確

---

## 今後の予防策

1. **コードレビュープロセス** - 実装前の設計レビュー
2. **段階的テスト** - 小さな変更ごとの動作確認
3. **ドキュメント充実** - 実装の意図を明確に記録

---

## 関連リンク

- [進捗管理ファイル](./CURRENT_PROGRESS.md)
- [プロジェクト仕様書](../implementation_strategy.md)
- [数学的基礎](../mathematical_foundation.md)

---

## 📚 論文との乖離管理

### 現在の論文乖離状況

| 論文 | 箇所 | 論文値 | 現在実装 | 誤差率 | 状況 |
|------|------|----------|------------|--------|------|
| Sornette_2004 | 式(54), βパラメータ | 0.33 | 0.33 | 0.0% | ✅ 解決済 |

### 検証基準
- **合格基準**: 誤差率 < 5%
- **警告レベル**: 誤差率 5-10%
- **致命的レベル**: 誤差率 > 10%

### 検証方法
1. **数値検証**: 論文報告値との直接比較
2. **統計検証**: 範囲・分布の整合性
3. **定性検証**: パラメータ間の相関・傾向の一致

---

*最終更新: 2025-08-02 (夕方) by Claude Code*