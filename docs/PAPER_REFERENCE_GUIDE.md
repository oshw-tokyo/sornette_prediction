# 論文参照ガイド - Claude Code用

## 📚 科学的根拠に基づく実装のための必須ガイド

このファイルは、Claude Codeが科学的根拠に基づいた正確な実装を行うための論文参照ガイドです。

## 🚨 重要な原則

### 1. 実装前の必須確認事項
- **論文の事前読み込み**: 実装前に必ず関連論文をReadツールで確認（**⚠️ 重要: PDFではなくテキスト版を使用**）
- **数式の完全一致**: 論文の数式と実装コードの一字一句照合
- **パラメータの定量検証**: 論文報告値との数値比較を必須実施
- **乖離のIssue化**: 5%以上の乖離は必ずCURRENT_ISSUES.mdに記録

### ⚠️ PDFファイルについての重要な注意
- **Context lowエラー回避**: PDFファイルの直接読み込みはシステムエラーを引き起こします
- **必ずテキスト版を使用**: `papers/extracted_texts/`ディレクトリ内のテキストファイルを参照してください

### 2. 論文参照の優先順位

#### Tier 1: 実装の核となる論文（必須参照）
1. **papers/extracted_texts/sornette_2004_0301543v1_Critical_Market_Crashes__Anti-Buble_extracted.txt**
   - **対象**: 式(54) - LPPLの基本形
   - **重要パラメータ**: β = 0.33 ± 0.03, ω = 6-8
   - **検証基準**: 1987年ブラックマンデーでの再現性
   - **実装箇所**: `src/fitting/utils.py` の logarithm_periodic_func

2. **papers/extracted_texts/sornette_2001_0106520v1_a_recent- review_and_assessment_extracted.txt**
   - **対象**: 総合的なレビューと手法論
   - **重要情報**: パラメータ推定手法、制約条件
   - **実装箇所**: `src/fitting/fitter.py` の最適化戦略

#### Tier 2: 拡張・改良手法
3. **papers/extracted_texts/sornette_2012_1212.2833v1_extracted.txt**
   - **対象**: 最新の改良手法と実用化技術
   - **実装箇所**: 将来の機能拡張

## 🔍 実装検証プロトコル

### Step 1: 論文読み込み
```
1. Readツールで該当論文を確認
2. 関連する数式・パラメータを特定
3. 実装に必要な制約条件を抽出
```

### Step 2: 数式照合
```
1. 論文の数式を正確に転写
2. 実装コードとの一字一句比較
3. 変数名・定数の対応関係を確認
```

### Step 3: 定量的検証
```
1. 論文報告値との数値比較
2. 誤差率の計算
3. 統計的有意性の確認
```

### Step 4: 乖離管理
```
1. 5%以上の乖離をIssue登録
2. 乖離の原因分析
3. 改善計画の策定
```

## 📊 現在の論文乖離状況

| 論文 | 箇所 | 論文値 | 現在実装 | 誤差率 | 状況 |
|------|------|--------|----------|--------|------|
| Sornette_2004 | 式(54), β | 0.33 | ~0.36 | +9.1% | 🔴 Critical |

## ⚠️ よくある実装エラー

### 1. 数式の不正確な転写
- **問題**: 論文の数式を推測で実装
- **対策**: 必ず原文を確認し、完全一致を確保

### 2. パラメータ制約の無視
- **問題**: 論文の制約条件を考慮しない
- **対策**: 制約条件を明示的にコードに実装

### 3. 検証の不十分さ
- **問題**: 論文結果との定量比較を行わない
- **対策**: 必ず数値での検証を実施

## 🎯 検証合格基準

### 定量的基準
- **誤差率 < 5%**: 合格
- **誤差率 5-10%**: 警告レベル（改善要）
- **誤差率 > 10%**: 致命的レベル（実装見直し必須）

### 定性的基準
- パラメータの傾向・範囲の一致
- 統計的有意性の確認
- 物理的・経済的解釈の整合性

## 🔧 実装時のチェックリスト

### 実装前
- [ ] 関連論文をReadツールで確認
- [ ] 該当する数式・パラメータを特定
- [ ] 制約条件・境界条件を把握

### 実装中
- [ ] 数式の完全一致を確認
- [ ] 変数名・定数の対応を明確化
- [ ] コメントで論文箇所を明記

### 実装後
- [ ] 論文報告値との数値比較
- [ ] 誤差率の計算と評価
- [ ] 必要に応じてIssue登録

## 📝 実装コードでの論文引用形式

```python
def logarithm_periodic_func(t, A, B, C, tc, beta, omega, phi):
    """
    対数周期パワー法則モデル (LPPL)
    
    参照論文: papers/extracted_texts/sornette_2004_0301543v1_Critical_Market_Crashes__Anti-Buble_extracted.txt
    数式: 式(54)
    I(t) = A + B(tc - t)^β + C(tc - t)^β cos(ω ln(tc - t) - φ)
    
    理論値: β = 0.33 ± 0.03, ω = 6-8 (Sornette, 2004)
    """
    # 実装コード
```

## 🚨 緊急時の対応

### 大きな乖離が発見された場合
1. **即座にIssue登録**: CURRENT_ISSUES.mdに詳細記録
2. **実装停止**: 修正完了まで関連実装を停止
3. **原因分析**: 論文との詳細比較を実施
4. **修正計画**: 具体的な改善ロードマップを策定

---

*このガイドは Claude Code の科学的正確性を保証するための重要な文書です*